datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String   @id @default(uuid())
  username     String   @unique
  passwordHash String

  // Groups where the user is a member
  groups       Group[]  @relation("GroupMembers")

  // Groups where the user is admin
  adminGroups  Group[]  @relation("GroupAdmin")

  availability Json?

  // Add these lines:
  sessionsGoing   Session[] @relation("SessionGoing")
  sessionsNotGoing Session[] @relation("SessionNotGoing")
}

model Group {
  id      String   @id @default(uuid())
  name    String
  sport   String

  // Admin relation (one-to-many)
  admin   User     @relation("GroupAdmin", fields: [adminId], references: [id])
  adminId String

  // Members relation (many-to-many)
  users   User[]   @relation("GroupMembers")

  // Add this line:
  sessions Session[]
}

model Session {
  id        String   @id @default(uuid())
  group     Group    @relation(fields: [groupId], references: [id])
  groupId   String
  date      DateTime
  startHour Int
  endHour   Int
  going     User[]   @relation("SessionGoing")
  notGoing  User[]   @relation("SessionNotGoing")
}